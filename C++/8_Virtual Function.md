가상 함수(Virtual Function)
===========================
가상함수에 대해 알기 위해서는 함수의 바인딩에 대해 알아야 한다.
## 함수의 바인딩
함수를 만들어서 컴파일 하면 각가의 커드가 기계어로 번역되어 메모리 상의 어딘가에 저장이 된다. 그리고 이 함수를 호출하는 부분에는 그 함수가 위치한 메모리 번지가 저장된다. 프로그램을 실행하면 명령어가 차례로 수행되다가 함수를 호출하느 부분을 만나면, 이 함수가 있는 메모리 번지로 점프를 해서 그 함수를 실행하고, 원래 위촐 되돌아온다. 이와 같이 함수를 호출하는 부분에 함수가 위치한 메모리 번지를 연결시켜 주는 것을 바인딩이라고 한다. 함수를 바인딩 하는데 두가지 방법이 있다.

* 동적 바인딩
* 정적 바인딩

### 정적 바인딩
일반적인 함수는 실행 파일을 만들 때 바인딩 할 수 있다. 즉, 컴파일을 해서 실행 파일을 만드는 단계에서 함수를 호출하는 부분과 그 함수가 저장되는 부분을 연결시킬 수가 있다는 말이다. 이와 같이 실행 파일을 만들 때 호출될 함수로 점프할 번지가 결정되어 바인딩되는 것을 정적 바인딩이라고 한다.

### 동적 바인딩
실행 파일을 만들 때 바인딩 되지 않고, 보류 상태로 두었다가 프로그램이 실행될 때 바인딩 되도록 할 수가 있다. 이렇게 실행 파일을 만들 때는 호출될 함수로 점수할 번지를 결정하지 않고 빈칸으로 두었다, 프로그램을 실행할 때 점프할 번지를 즉석에서 결정하여 함수를 실행하도록 하는 것을 동적 바인딩이라고 한다.

* 단점
  - 프로그램을 실행하는 중에 바인딩을 해야 하기 때문에 정적바인딩을 하는 경우보다 수행속도가 아주조금 떨어진다.
  - 바인딩에 필요한 메모리 번지를 저장할 포인터를 가지고 있어야 하므로, 정적 바인딩을 할 때는 필요 없는 메모리가 함수 당 4바이트씩 더 필요하게 된다.

즉, 동적바인딩이 꼭 필요한 경우가 아니라면 가급적 정적 바인딩을 사용하는 것이 좋다.

### 가상함수
함수를 선언할 때, 앞에 virtual이라는 키워드를 붙여주면, 그 함수는 동적 바인딩을 사용한다. 즉, virtual이라는 말에서 가상은, 이 함수를 호출했을 때, 함수를 실행하기 위해 실제 함수가 있는 번지로 점프를 하게 되는데, 실행 파일에는 점프할 번지가 존재 하지 않는다는 뜻에서 붙어지는 말이다. 가상 함수 외의 일반적인 함수는 모두 정적 바인딩을 사용한다.

## 동작 바인딩의 효과
동적 바인딩의 효과에 대해 설명하기 위해 앞에서 만들었던 Point 클래스와 여기서 상속받안 만들어진 Point3D 클래스를 예로 들어 보면 동적바인딩 효과를 확실히 볼 수 있도록 하기 위해 Show 함수를 보다 간단하게 만들었다.

```
class Point
{
  public:
    void Show();
};

void Point::Show()
{
  cout << "Point 클래스의 Show 함수 호출";
}
```

Point3D 클래스는 Point 클래스로부터 상속 받아 Show 함수를 재정의 했다.

```
class Point3D : public Point
{
  public:
    void Show();
};

void Point3D::Show()
{
  cout << "Point3D 클래스의 Show 함수 호출";
}
```

### 기반 클래스의 포인터로 가상함수를 호출한 경우
```
class Point
{
  public:
    virtual void Show();
};

실행 결과
Point 클래스의 Show 함수 호출
Point3D 클래스의 Show 함수 호출
```

실행 결과를 보면 기반 클래스형 포인터로 파생 클래스를 접근했음에도 불구하고, 실제 파생클래스의 Show함수가 제대로 호출되었다. 기반 클래스의 Show함수가 가상함수로 정의되어 동적 바인딩을 사용하기 때문에 가능한 것이다. 동적 바인딩을 사용하면 어떤 포인터에 의해 접근되었는지에 상관없이 참조된 인스턴스의 실제 클래스형에 따라 재정의된 함수가 제대로 호출된다. 즉, 기반 클래스의 함수가 파생 클래스에서 재정의 되었을 때, 파생 클래스의 재정의 된 함수가 제대로 호출되려면, 기반 클래스의 원래 함수는 반드시 가상함수로 정의해야 한다.
